<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>For My Greatest Love</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
  :root { --accent:#ff6b81; }

  html,body{
    margin:0; padding:0; height:100%;
    font-family:'Poppins', sans-serif;
    overflow-x:hidden;
    background: linear-gradient(160deg, #f6eeff 0%, #eff9ff 100%);
  }

  .glow-layers{position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden;}
  .glow{position:absolute; filter:blur(90px); opacity:0.55; mix-blend-mode:screen;}
  .g1{width:35vmax; height:35vmax; background:radial-gradient(circle at 30% 30%, #ffd6e0, transparent 30%); top:-10vh; left:-10vw;}
  .g2{width:40vmax; height:40vmax; background:radial-gradient(circle at 70% 70%, #d9f0ff, transparent 30%); bottom:-15vh; right:-5vw;}
  .g3{width:25vmax; height:25vmax; background:radial-gradient(circle at 50% 50%, #e8f7ee, transparent 30%); top:20vh; right:5vw; opacity:0.5;}

  #particleCanvas{position:fixed; inset:0; z-index:0; pointer-events:none; opacity:0.9;}
  .page { min-height:100vh; display:flex; align-items:center; justify-content:center; position:relative; z-index:2; padding:20px; flex-direction:column;}

  .card-input{
    max-width:700px; width:100%;
    background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.05));
    backdrop-filter: blur(8px) saturate(1.05);
    border-radius:16px; padding:28px;
    text-align:center; border:1px solid rgba(255,255,255,0.14);
    box-shadow: 0 10px 30px rgba(20,20,40,0.06);
    position:relative;
  }
  .card-input h1{margin-bottom:12px;}
  .card-input input{width:100%; max-width:440px; padding:12px 16px; font-size:1rem; border-radius:12px; border:1px solid rgba(0,0,0,0.08); outline:none; background: rgba(255,255,255,0.95); text-align:center;}
  .btn-primary-custom { padding:10px 20px; background:linear-gradient(90deg,#ff7b94,#ffb3b3); border:none; border-radius:999px; color:white; font-weight:600; }
  .hint{color:#666; margin-top:8px; font-size:0.9rem;}

  /* Floating emojis overlay */
  .floating-emojis{
    position:absolute; inset:0; pointer-events:none; z-index:1; overflow:hidden;
  }
  .floating-emojis .emoji{
    position:absolute; font-size:2rem; animation:floatUp linear infinite;
  }
  .floating-emojis .emoji:nth-child(1){left:10%; animation-duration:7s; animation-delay:0s;}
  .floating-emojis .emoji:nth-child(2){left:30%; animation-duration:9s; animation-delay:1s;}
  .floating-emojis .emoji:nth-child(3){left:50%; animation-duration:8s; animation-delay:2s;}
  .floating-emojis .emoji:nth-child(4){left:70%; animation-duration:10s; animation-delay:0.5s;}
  .floating-emojis .emoji:nth-child(5){left:20%; animation-duration:12s; animation-delay:1.5s;}
  .floating-emojis .emoji:nth-child(6){left:80%; animation-duration:9s; animation-delay:0.2s;}
  @keyframes floatUp{0%{transform: translateY(100vh) rotate(0deg);} 100%{transform: translateY(-10vh) rotate(360deg);}}

  /* Carousel page */
  #carouselPage{display:none; flex-direction:column; align-items:center;}
  .carousel-item img {height:100vh; width:100%; object-fit:cover;}
  .top-controls{position:fixed; top:12px; left:12px; z-index:10; background:rgba(255,255,255,0.9); padding:8px 12px; border-radius:12px; cursor:pointer; font-weight:600; box-shadow:0 6px 18px rgba(0,0,0,0.1);}
  .carousel-continue{margin:20px auto;}

  /* Message page - FIXED SCROLLABLE */
  #messagePage{
    display:none;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    padding:20px 15px;
    height:100vh;
    overflow-y:auto;
  }
  .message-back{position:fixed; top:12px; left:12px; z-index:10; background:rgba(255,255,255,0.95); padding:8px 12px; border-radius:12px; cursor:pointer; font-weight:600; box-shadow:0 6px 18px rgba(0,0,0,0.1);}
  .final-message{
    max-width:900px;
    width:100%;
    background:linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.90));
    border-radius:18px; padding:28px;
    border:1px solid rgba(0,0,0,0.04);
    box-shadow:0 12px 40px rgba(20,20,40,0.06);
    line-height:1.55;
  }
  .final-message h2{text-align:center; color:var(--accent); margin-bottom:12px;}
  .final-message p{
    white-space:pre-wrap; margin-bottom:14px;
    opacity:0; transform: translateY(20px); transition: all 0.8s ease-out;
  }
  .final-message p.visible{
    opacity:1; transform: translateY(0);
  }

  /* Heart Animation X */
  #heartAnimation {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1000;
    display: none;
  }
  
  .heart {
    position: absolute;
    font-size: 24px;
    color: #ff6b81;
    animation: heartFloat 3s linear forwards;
    filter: drop-shadow(0 0 8px rgba(255, 107, 129, 0.7));
  }
  
  @keyframes heartFloat {
    0% {
      opacity: 1;
      transform: translateY(0) rotate(0deg) scale(1);
    }
    100% {
      opacity: 0;
      transform: translateY(-100vh) rotate(360deg) scale(1.5);
    }
  }
  
  /* Secret trigger button */
  .secret-trigger {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(255, 107, 129, 0.9);
    color: white;
    border: none;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    font-size: 24px;
    cursor: pointer;
    z-index: 1001;
    box-shadow: 0 4px 15px rgba(255, 107, 129, 0.4);
    transition: all 0.3s ease;
  }
  
  .secret-trigger:hover {
    transform: scale(1.1);
    background: rgba(255, 107, 129, 1);
  }

  /* Music controls */
  .music-controls {
    position: fixed;
    bottom: 20px;
    left: 20px;
    z-index: 1001;
    display: flex;
    gap: 10px;
    align-items: center;
  }
  
  .music-btn {
    background: rgba(255, 107, 129, 0.9);
    color: white;
    border: none;
    width: 45px;
    height: 45px;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(255, 107, 129, 0.3);
    transition: all 0.3s ease;
  }
  
  .music-btn:hover {
    transform: scale(1.1);
    background: rgba(255, 107, 129, 1);
  }
  
  .music-btn.muted {
    background: rgba(100, 100, 100, 0.7);
  }
  
  .volume-slider {
    width: 100px;
    height: 5px;
    -webkit-appearance: none;
    background: rgba(255, 107, 129, 0.3);
    border-radius: 5px;
    outline: none;
  }
  
  .volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #ff6b81;
    cursor: pointer;
  }
  
  .music-indicator {
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(255, 255, 255, 0.95);
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 600;
    color: #ff6b81;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    z-index: 1001;
    display: none;
    align-items: center;
    gap: 8px;
    animation: pulse 2s infinite;
  }
  
  .music-indicator .note {
    font-size: 18px;
  }
  
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }
  
  @media(max-width:768px){
    .top-controls, .message-back{padding:6px 10px;}
    .btn-primary-custom{padding:8px 18px;}
    .final-message{padding:18px;}
    .secret-trigger {
      bottom: 10px;
      right: 10px;
      width: 45px;
      height: 45px;
      font-size: 20px;
    }
    .music-controls {
      bottom: 10px;
      left: 10px;
    }
    .music-btn {
      width: 40px;
      height: 40px;
      font-size: 18px;
    }
    .volume-slider {
      width: 80px;
    }
    .music-indicator {
      top: 10px;
      right: 10px;
      padding: 6px 12px;
      font-size: 12px;
    }
  }
</style>
</head>
<body>

<div class="glow-layers">
  <div class="glow g1"></div>
  <div class="glow g2"></div>
  <div class="glow g3"></div>
</div>

<canvas id="particleCanvas"></canvas>

<!-- Heart Animation X Container -->
<div id="heartAnimation"></div>

<!-- Music Indicator -->
<div class="music-indicator" id="musicIndicator">
  <span class="note">üéµ</span> Happy Birthday Music!
</div>

<!-- Birthday Input Page -->
<section id="birthdayInputPage" class="page">
  <div class="card-input">
    <div class="floating-emojis">
      <span class="emoji">üéÇ</span>
      <span class="emoji">üéà</span>
      <span class="emoji">üéâ</span>
      <span class="emoji">üéÅ</span>
      <span class="emoji">‚ú®</span>
      <span class="emoji">üç∞</span>
    </div>
    <h1>Happy 18th Birthday</h1>
    <input type="text" id="singleDate" placeholder="Enter your Birthday">
    <div style="margin-top:14px;"><button class="btn-primary-custom" onclick="validateAndProceed()">Continue</button></div>
    <div class="hint" id="hintText">Enter your birthday to see the special gallery & message.</div>
  </div>
</section>

<!-- Carousel Page -->
<section id="carouselPage" class="page">
  <div class="top-controls" onclick="backToInput()">Back</div>
  <div id="birthdayCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-touch="true">
    <div class="carousel-inner">
      <div class="carousel-item active"><img src="PICTURES/pic1.jpeg" class="d-block" alt=""></div>
      <div class="carousel-item"><img src="PICTURES/pic2.jpg" class="d-block" alt=""></div>
      <div class="carousel-item"><img src="PICTURES/pic3.jpeg" class="d-block" alt=""></div>
      <div class="carousel-item"><img src="PICTURES/pic4.jpeg" class="d-block" alt=""></div>
      <div class="carousel-item"><img src="PICTURES/pic5.jpg" class="d-block" alt=""></div>
      <div class="carousel-item"><img src="PICTURES/pic6.jpg" class="d-block" alt=""></div>
      <div class="carousel-item"><img src="PICTURES/pic7.jpg" class="d-block" alt=""></div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#birthdayCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#birthdayCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
  <div class="carousel-continue">
    <button class="btn-primary-custom" onclick="goToMessage()">Continue</button>
  </div>
</section>

<!-- Message Page -->
<section id="messagePage" class="page">
  <div class="message-back" onclick="backToCarousel()">Back</div>
  <div class="final-message">
    <h2>For You</h2>

    <p>Hi! Irish Kha, my greatest love, my darling, my baby, my teerak, mi amor, my love, my honey, my sweetheart. Can you believe you're turning 18? Hehe, too old, right? I still remember the first time I saw you ‚Äî it was in Roxas. Something about you immediately caught my attention, and I can't help but smile at how funny and strange it felt.</p>

    <p>I wonder if you even remember that first glance, but it stuck with me. I knew there was something special about you, something I had never felt before. Then the next time I saw you was in school, and you were a little nervous ‚Äî maybe because of me? Every little moment, every laugh, every awkward pause, and all the small things we shared, I remember them like they happened yesterday.</p>

    <p>Thinking about how time has flown, from that first encounter to now, it amazes me how much we have experienced, how many laughs we've shared, and how much we have grown. Now it's your birthday! I hope this day fills your heart with joy and that you feel loved, not only by me but by everyone who truly cares about you.</p>

    <p>I am so proud of you and everything you have achieved. Remember to always be kind to yourself, take care of your body, your heart, and your mind. Eat on time, pray before you sleep, pray before you drive, and never forget to thank God for the little and big things in life.</p>

    <p>Even though I am not there with you physically or online, know that you are always in my heart, and I think of you more than you could ever imagine. I am sorry for leaving you like that ‚Äî you did not deserve me ‚Äî and I hope you can forgive me someday. You are one of the most precious parts of my life, and I hope you always feel the love and care that surrounds you, whether I am there or not.</p>

    <p>Happy 18th birthday, my greatest love! May this day be filled with laughter, joy, and people who make you feel truly special. May your heart always be light, your smile always be real, and your journey ahead be filled with happiness, success, and love.</p>

    <p>I hope you continue to follow your dreams, grow stronger, and embrace life with courage and joy. And remember, no matter where life takes us, a part of my heart will always be grateful that I knew you this closely. Enjoy your special day, Irish Kha, and always remember that you are loved, cherished, and unforgettable.</p>

    <p>Every laugh, every small moment, every memory ‚Äî they will always be a part of me. Once again, Happy 18th birthday again. No matter how far life takes us, a part of my heart will always be grateful that it once knew you this closely.</p>

  </div>
</section>

<!-- Music Controls -->
<div class="music-controls" id="musicControls" style="display: none;">
  <button class="music-btn" id="playPauseBtn">‚è∏Ô∏è</button>
  <button class="music-btn" id="muteBtn">üîä</button>
  <input type="range" min="0" max="100" value="50" class="volume-slider" id="volumeSlider">
</div>

<!-- Secret Trigger Button -->
<button class="secret-trigger" id="heartTrigger" title="Secret Heart Animation">‚ù§Ô∏è</button>

<!-- Audio Element for Birthday Music - ACTUAL HAPPY BIRTHDAY SONG -->
<audio id="birthdayMusic" loop>
  <!-- Option 1: Piano version of Happy Birthday -->
  <source src="https://assets.mixkit.co/music/preview/mixkit-happy-birthday-to-you-443.mp3" type="audio/mpeg">
  <source src="https://assets.mixkit.co/music/preview/mixkit-happy-birthday-to-you-443.wav" type="audio/wav">
  
  <!-- Option 2: Another Happy Birthday version -->
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
  
  <!-- Option 3: Direct Happy Birthday MP3 (most reliable) -->
  <source src="https://www.twinmusicom.org/song/273/happy-birthday-to-you" type="audio/mpeg">
  
  <!-- Option 4: YouTube audio of Happy Birthday -->
  <source src="https://www.bensound.com/bensound-music/bensound-happybirthday.mp3" type="audio/mpeg">
  
  <!-- Fallback message -->
  Your browser does not support the audio element.
</audio>

<!-- Music Enable Button (for browsers that block auto-play) -->
<div id="musicEnableOverlay" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:9999; display:flex; align-items:center; justify-content:center; display:none;">
  <div style="background:white; padding:40px; border-radius:20px; text-align:center; max-width:400px; margin:20px;">
    <h2 style="color:#ff6b81; margin-bottom:20px;">üéµ Enable Birthday Music üéµ</h2>
    <p style="margin-bottom:25px; line-height:1.5;">Click the button below to enable the "Happy Birthday to You" music that will play throughout the celebration!</p>
    <button onclick="enableMusicPermission()" style="background:linear-gradient(90deg,#ff7b94,#ffb3b3); color:white; border:none; padding:15px 30px; border-radius:30px; font-size:18px; font-weight:bold; cursor:pointer; box-shadow:0 5px 15px rgba(255,107,129,0.4);">
      Enable Birthday Music
    </button>
    <p style="margin-top:15px; font-size:14px; color:#666;">Or click anywhere else to skip music</p>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const birthdayInputPage = document.getElementById('birthdayInputPage');
  const carouselPage = document.getElementById('carouselPage');
  const messagePage = document.getElementById('messagePage');
  const singleDateInput = document.getElementById('singleDate');
  const hintText = document.getElementById('hintText');
  const heartAnimation = document.getElementById('heartAnimation');
  const heartTrigger = document.getElementById('heartTrigger');
  const birthdayMusic = document.getElementById('birthdayMusic');
  const musicControls = document.getElementById('musicControls');
  const musicIndicator = document.getElementById('musicIndicator');
  const playPauseBtn = document.getElementById('playPauseBtn');
  const muteBtn = document.getElementById('muteBtn');
  const volumeSlider = document.getElementById('volumeSlider');
  const musicEnableOverlay = document.getElementById('musicEnableOverlay');

  let isMusicPlaying = false;
  let isMuted = false;
  let lastVolume = 0.5;
  let musicEnabled = false;

  // Initialize music volume
  birthdayMusic.volume = 0.5;

  // Show music enable overlay after 2 seconds
  setTimeout(() => {
    if (!musicEnabled) {
      musicEnableOverlay.style.display = 'flex';
    }
  }, 2000);

  function enableMusicPermission() {
    musicEnabled = true;
    musicEnableOverlay.style.display = 'none';
    
    // Try to play music immediately to get user permission
    birthdayMusic.play()
      .then(() => {
        // Music started successfully
        isMusicPlaying = true;
        birthdayMusic.pause(); // Pause it, we'll play it later
        playPauseBtn.innerHTML = '‚è∏Ô∏è';
        
        // Update hint
        if (hintText) {
          hintText.innerHTML = 'Enter your birthday: December 08, 2007<br><small>üéµ Happy Birthday music is ready!</small>';
        }
        
        // Show success message briefly
        const originalHint = hintText.innerHTML;
        hintText.innerHTML = '‚úÖ Music enabled! Enter your birthday now.';
        hintText.style.color = '#ff6b81';
        setTimeout(() => {
          hintText.innerHTML = originalHint;
          hintText.style.color = '';
        }, 2000);
      })
      .catch(error => {
        console.log('Could not play music immediately:', error);
        // Still enable music for later
        if (hintText) {
          hintText.innerHTML = 'Enter your birthday: December 08, 2007<br><small>üéµ Music will play when you enter your birthday!</small>';
        }
      });
  }

  // Close overlay if clicked outside
  musicEnableOverlay.addEventListener('click', function(e) {
    if (e.target === musicEnableOverlay) {
      musicEnableOverlay.style.display = 'none';
      if (hintText && !musicEnabled) {
        hintText.innerHTML = 'Enter your birthday: December 08, 2007<br><small>Click the ‚ù§Ô∏è button later if you want music</small>';
      }
    }
  });

  // Music control functions
  function playBirthdayMusic() {
    if (!musicEnabled) {
      // Show music enable overlay
      musicEnableOverlay.style.display = 'flex';
      return;
    }
    
    if (isMusicPlaying) return;
    
    birthdayMusic.play()
      .then(() => {
        isMusicPlaying = true;
        musicControls.style.display = 'flex';
        musicIndicator.style.display = 'flex';
        playPauseBtn.innerHTML = '‚è∏Ô∏è';
        birthdayMusic.volume = lastVolume;
        volumeSlider.value = lastVolume * 100;
        
        // Show celebration message
        if (hintText) {
          hintText.innerHTML = '‚úÖ Correct! Loading your birthday surprise...<br><small>üé∂ Happy Birthday to You! üé∂</small>';
        }
      })
      .catch(error => {
        console.log('Music playback failed:', error);
        // Try enabling music first
        musicEnableOverlay.style.display = 'flex';
      });
  }

  function togglePlayPause() {
    if (!isMusicPlaying) {
      playBirthdayMusic();
    } else {
      if (birthdayMusic.paused) {
        birthdayMusic.play();
        playPauseBtn.innerHTML = '‚è∏Ô∏è';
      } else {
        birthdayMusic.pause();
        playPauseBtn.innerHTML = '‚ñ∂Ô∏è';
      }
    }
  }

  function toggleMute() {
    isMuted = !isMuted;
    if (isMuted) {
      birthdayMusic.volume = 0;
      muteBtn.innerHTML = 'üîá';
      muteBtn.classList.add('muted');
    } else {
      birthdayMusic.volume = lastVolume;
      muteBtn.innerHTML = 'üîä';
      muteBtn.classList.remove('muted');
    }
  }

  function updateVolume() {
    lastVolume = volumeSlider.value / 100;
    if (!isMuted) {
      birthdayMusic.volume = lastVolume;
    }
  }

  // Set up music controls
  playPauseBtn.addEventListener('click', togglePlayPause);
  muteBtn.addEventListener('click', toggleMute);
  volumeSlider.addEventListener('input', updateVolume);

  // Auto-play music when correct birthday is entered
  function tryParseSingleLineDate(str){
    if(!str) return null;
    const s = str.trim().replace(/\s+/g,' ');
    const parsed = Date.parse(s);
    if(!isNaN(parsed)) return new Date(parsed);
    return null;
  }

  function validateAndProceed(){
    const val = singleDateInput.value.trim();
    const dateObj = tryParseSingleLineDate(val);
    if(!val){
      hintText.textContent = 'Please enter birthday: December 08, 2007';
      hintText.style.color='#b23'; return;
    }
    if(!dateObj){
      hintText.textContent='Invalid format. Use: December 08, 2007';
      hintText.style.color='#b23'; return;
    }

    const correctDate = new Date(2007,11,8); // Dec 8, 2007
    if(dateObj.getFullYear() !== correctDate.getFullYear() || dateObj.getMonth() !== correctDate.getMonth() || dateObj.getDate() !== correctDate.getDate()){
      hintText.textContent='Oops! Wrong birthday. Try again.';
      hintText.style.color='#b23'; return;
    }

    // Trigger heart animation on correct birthday
    createHeartAnimation();
    
    // Start playing birthday music
    setTimeout(() => {
      playBirthdayMusic();
    }, 500);
    
    setTimeout(() => {
      birthdayInputPage.style.display='none';
      carouselPage.style.display='flex';
      window.scrollTo({top:0, behavior:'smooth'});
    }, 2000);
  }

  function backToInput(){ 
    carouselPage.style.display='none'; 
    birthdayInputPage.style.display='flex'; 
    window.scrollTo({top:0, behavior:'smooth'});
  }
  
  function goToMessage(){ 
    carouselPage.style.display='none'; 
    messagePage.style.display='flex'; 
    window.scrollTo({top:0, behavior:'smooth'});
    
    // Trigger heart animation after a short delay when reaching message page
    setTimeout(createHeartAnimation, 500);
  }
  
  function backToCarousel(){ 
    messagePage.style.display='none'; 
    carouselPage.style.display='flex'; 
    window.scrollTo({top:0, behavior:'smooth'});
  }
  
  singleDateInput.addEventListener('keydown', e=>{
    if(e.key==='Enter'){
      validateAndProceed();
    }
  });
  
  window.addEventListener('load',()=>{
    singleDateInput.focus();
  });

  // Soft particle system
  (function(){
    const canvas = document.getElementById('particleCanvas');
    const ctx = canvas.getContext('2d');
    let w = canvas.width = innerWidth;
    let h = canvas.height = innerHeight;
    const particles = [];
    const COUNT = Math.round((w*h)/90000);
    const colors = ['#ffd6e0','#d9f0ff','#e8f7ee','#fff3d9','#f5e8ff'];
    function rand(min,max){return Math.random()*(max-min)+min;}
    function Particle(){this.reset();}
    Particle.prototype.reset=function(){this.x=rand(0,w);this.y=rand(0,h);this.vx=rand(-0.15,0.15);this.vy=rand(-0.2,0.2);this.size=rand(20,70);this.alpha=rand(0.06,0.22);this.color=colors[Math.floor(rand(0,colors.length))];this.life=rand(200,800);this.age=0;};
    Particle.prototype.update=function(){this.x+=this.vx;this.y+=this.vy;this.age++; if(this.age>this.life||this.x<-200||this.x>w+200||this.y<-200||this.y>h+200)this.reset();};
    Particle.prototype.draw=function(ctx){ctx.beginPath();ctx.fillStyle=this.color;ctx.globalAlpha=this.alpha;ctx.ellipse(this.x,this.y,this.size,this.size*0.6,0,0,Math.PI*2);ctx.fill(); ctx.globalAlpha=1;};
    function init(){w=canvas.width=innerWidth; h=canvas.height=innerHeight; particles.length=0; for(let i=0;i<Math.max(8,COUNT);i++)particles.push(new Particle());}
    function loop(){ctx.clearRect(0,0,w,h); for(let p of particles){p.update(); p.draw(ctx);} requestAnimationFrame(loop);}
    window.addEventListener('resize',()=>{init();});
    init(); loop();
  })();

  // Fade-in paragraphs on scroll
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if(entry.isIntersecting){
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      }
    });
  }, {threshold:0.2});
  document.querySelectorAll('.final-message p').forEach(p => observer.observe(p));

  // Heart Animation X
  function createHeartAnimation() {
    heartAnimation.style.display = 'block';
    heartAnimation.innerHTML = '';
    
    // Create multiple hearts
    const heartCount = 50;
    const heartEmojis = ['‚ù§Ô∏è', 'üíñ', 'üíó', 'üíì', 'üíò', 'üíï', 'üíû'];
    
    for (let i = 0; i < heartCount; i++) {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
      
      // Random position at bottom
      const startX = Math.random() * window.innerWidth;
      heart.style.left = `${startX}px`;
      heart.style.bottom = '0px';
      
      // Random animation properties
      const duration = 2 + Math.random() * 2;
      const delay = Math.random() * 1.5;
      const size = 20 + Math.random() * 30;
      
      heart.style.fontSize = `${size}px`;
      heart.style.animationDuration = `${duration}s`;
      heart.style.animationDelay = `${delay}s`;
      
      heartAnimation.appendChild(heart);
    }
    
    // Hide after animation completes
    setTimeout(() => {
      heartAnimation.style.display = 'none';
      heartAnimation.innerHTML = '';
    }, 4000);
  }

  // Trigger heart animation on button click
  heartTrigger.addEventListener('click', createHeartAnimation);
  
  // Also trigger heart animation when clicking the music enable button
  document.querySelector('#musicEnableOverlay button').addEventListener('click', function() {
    setTimeout(createHeartAnimation, 500);
  });
</script>

</body>
</html>
